#include <string>
#include <random>
#include <iostream>
#include <sstream>
#include <cstdlib>
#include <cstdio>

const std::string x[38] = {
"148716326428747504876892673846822697944788",
"346174301994782309949083534626583574971230",
"326145840086906895720960521644275021092652",
"217797339042265272628582616463520581348370",
"153361093707290686457805734551426788353712",
"650652501830130164803412530014486710794199",
"413097599440550336425083260331987637179134",
"900420839780291848019749796922270579055163",
"770871326557552280981775863149330227687190",
"917319212561512090232142060032127254807678",
"152549828812643158302801857670572970220614",
"075742665053564509723331296020564784388370",
"997083539591585096094857652247188280531793",
"802126551465424508674274091041982997229786",
"653206272745178367355238826484664512945878",
"687831095244110208657536841553295197320191",
"033124938012237775501419772340538855517294",
"217855292967475890694492689610883413315832",
"420413661862267185085992993659612956839989",
"574288366668900678751262380398455321940195",
"230798976255631151294132963683500410041293",
"032020610424600793038030727451400934689471",
"306479186420367800362830411898986900274645",
"666182891879892713883545478717898640608754",
"554714922092749180579671542630531510924329",
"412700757823247604840262079526626691570077",
"742268316837296330536166649156523703423170",
"902186336763490834548396430030790709565320",
"135637671952350937376143146079662491711408",
"996166252517313231658603281189154812040309",
"858773184482278370324570503862759828730876",
"782146545070572327861507640111133864862849",
"033249667998483158855331140595187961908124",
"177733807896425641944525028226039695256304",
"173202807770655352799473330231757062471059",
"144420018363420586831811181552737260759289",
"289781115984869938976394808520585424299321",
"599317323656274587290204141663678065059442"
};

std::string Key() {
    std::string Serial = "12345678901234567890";
    int S = 0, j = 1, n, a;

    // Generate random serial
    for (int i = 0; i < 20; i++) {
        Serial[i] = (char)(std::rand() % 10 + '0');
    }

    // Calculate n and modify Serial
    n = std::atoi(Serial.substr(0, 4).c_str());
    for (int i = 5; i <= 18; i++) {
        a = std::atoi(x[0].substr(j, 3).c_str());
        Serial[i] = (char)('0' + ((n / a + (n % a)) % 10));
        j += 3;
    }

    // Calculate S
    for (int i = 1; i < 19; i++) {
        S += (int)(Serial[i] - '0');
    }

    // Calculate j
    j = S % 10;
    if (j == 0) j = 10;

    // Calculate Name
    std::string Name;
    Name = Serial.substr(0, 4) + "-" + Serial.substr(4, 5) + "-" + Serial.substr(9, 5) + "-" + Serial[19] + std::to_string(j);

    return Name;
}


int main() {
    std::srand(time(0)); // Seed the random number generator

    std::string name = Key();
    std::cout << name << std::endl;

    return 0;
}


